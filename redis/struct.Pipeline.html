<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Pipeline` struct in crate `redis`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Pipeline">

    <title>redis::Pipeline - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'><a href='index.html'>redis</a></p><div class='block struct'><h2>Structs</h2><a class='struct ' href='struct.Client.html'>Client</a><a class='struct ' href='struct.Cmd.html'>Cmd</a><a class='struct ' href='struct.Connection.html'>Connection</a><a class='struct ' href='struct.Error.html'>Error</a><a class='struct ' href='struct.InfoDict.html'>InfoDict</a><a class='struct ' href='struct.Iter.html'>Iter</a><a class='struct ' href='struct.Msg.html'>Msg</a><a class='struct ' href='struct.Parser.html'>Parser</a><a class='struct current' href='struct.Pipeline.html'>Pipeline</a><a class='struct ' href='struct.PubSub.html'>PubSub</a></div><div class='block enum'><h2>Enums</h2><a class='enum ' href='enum.ErrorKind.html'>ErrorKind</a><a class='enum ' href='enum.Value.html'>Value</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.FromRedisValue.html'>FromRedisValue</a><a class='trait ' href='trait.ToRedisArgs.html'>ToRedisArgs</a></div><div class='block fn'><h2>Functions</h2><a class='fn ' href='fn.cmd.html'>cmd</a><a class='fn ' href='fn.from_redis_value.html'>from_redis_value</a><a class='fn ' href='fn.pack_command.html'>pack_command</a><a class='fn ' href='fn.parse_redis_value.html'>parse_redis_value</a><a class='fn ' href='fn.pipe.html'>pipe</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><div class='in-band'>Struct <a href='index.html'>redis</a>::<wbr><a class='struct' href=''>Pipeline</a><wbr><a class='stability Experimental' title=''>Experimental</a></div><div class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]
            </a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-15025' href='../src/redis/src/redis/cmd.rs.html#20-23'>[src]</a></div></h1>
<pre class='rust struct'>pub struct Pipeline {
    // some fields omitted
}</pre><div class='docblock'><p>Represents a redis command pipeline.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><a class='stability Experimental' title='Experimental'></a><code>impl <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h3><div class='docblock'><p>A pipeline allows you to send multiple commands in one go to the
redis server.  API wise it&#39;s very similar to just using a command
but it allows multiple commands to be chained and some features such
as iteration are not available.</p>

<p>Basic example:</p>
<pre class='rust '>
<span class='kw'>let</span> ((<span class='ident'>k1</span>, <span class='ident'>k2</span>),) : ((<span class='ident'>i32</span>, <span class='ident'>i32</span>),) <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>pipe</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_1&quot;</span>).<span class='ident'>arg</span>(<span class='number'>42i</span>).<span class='ident'>ignore</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_2&quot;</span>).<span class='ident'>arg</span>(<span class='number'>43i</span>).<span class='ident'>ignore</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;MGET&quot;</span>).<span class='ident'>arg</span>([<span class='string'>&quot;key_1&quot;</span>, <span class='string'>&quot;key_2&quot;</span>][]).<span class='ident'>query</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>

<p>As you can see with <code>cmd</code> you can start a new command.  By default
each command produces a value but for some you can ignore them by
calling <code>ignore</code> on the command.  That way it will be skipped in the
return value which is useful for <code>SET</code> commands and others, which
do not have a useful return value.</p>
</div><div class='impl-methods'><h4 id='method.new' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.new' class='fnname'>new</a>() -&gt; <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h4>
<div class='docblock'><p>Creates an empty pipeline.  For consistency with the <code>cmd</code>
api a <code>pipe</code> function is provided as alias.</p>
</div><h4 id='method.cmd' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.cmd' class='fnname'>cmd</a>&lt;'a&gt;(&amp;mut self, name: &amp;'a <a href='http://doc.rust-lang.org/master/std/primitive.str.html'>str</a>) -&gt; &amp;mut <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h4>
<div class='docblock'><p>Starts a new command.  Functions such as <code>arg</code> then become
available to add more arguments to that command.</p>
</div><h4 id='method.arg' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.arg' class='fnname'>arg</a>&lt;T: <a class='trait' href='../redis/trait.ToRedisArgs.html' title='redis::ToRedisArgs'>ToRedisArgs</a>&gt;(&amp;mut self, arg: T) -&gt; &amp;mut <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h4>
<div class='docblock'><p>Adds an argument to the last started command.  This works similar
to the <code>arg</code> method of the <code>Cmd</code> object.</p>

<p>Note that this function fails the task if executed on an empty pipeline.</p>
</div><h4 id='method.ignore' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.ignore' class='fnname'>ignore</a>(&amp;mut self) -&gt; &amp;mut <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h4>
<div class='docblock'><p>Instructs the pipeline to ignore the return value of this command.
It will still be ensured that it is not an error, but any successful
result is just thrown away.  This makes result processing through
tuples much easier because you do not need to handle all the items
you do not care about.</p>

<p>Note that this function fails the task if executed on an empty pipeline.</p>
</div><h4 id='method.atomic' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.atomic' class='fnname'>atomic</a>(&amp;mut self) -&gt; &amp;mut <a class='struct' href='../redis/struct.Pipeline.html' title='redis::Pipeline'>Pipeline</a></code></h4>
<div class='docblock'><p>This enables atomic mode.  In atomic mode the whole pipeline is
enclosed in <code>MULTI</code>/<code>EXEC</code>.  From the user&#39;s point of view nothing
changes however.  This is easier than using <code>MULTI</code>/<code>EXEC</code> yourself
as the format does not change.</p>
<pre class='rust '>
<span class='kw'>let</span> (<span class='ident'>k1</span>, <span class='ident'>k2</span>) : (<span class='ident'>i32</span>, <span class='ident'>i32</span>) <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>pipe</span>()
    .<span class='ident'>atomic</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;GET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_1&quot;</span>)
    .<span class='ident'>cmd</span>(<span class='string'>&quot;GET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_2&quot;</span>).<span class='ident'>query</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>
</div><h4 id='method.query' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.query' class='fnname'>query</a>&lt;T: <a class='trait' href='../redis/trait.FromRedisValue.html' title='redis::FromRedisValue'>FromRedisValue</a>&gt;(&amp;self, con: &amp;<a class='struct' href='../redis/struct.Connection.html' title='redis::Connection'>Connection</a>) -&gt; <a class='type' href='../redis/type.RedisResult.html' title='redis::RedisResult'>RedisResult</a>&lt;T&gt;</code></h4>
<div class='docblock'><p>Executes the pipeline and fetches the return values.  Since most
pipelines return different types it&#39;s recommended to use tuple
matching to process the results:</p>
<pre class='rust '>
<span class='kw'>let</span> (<span class='ident'>k1</span>, <span class='ident'>k2</span>) : (<span class='ident'>i32</span>, <span class='ident'>i32</span>) <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>pipe</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_1&quot;</span>).<span class='ident'>arg</span>(<span class='number'>42i</span>).<span class='ident'>ignore</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;SET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_2&quot;</span>).<span class='ident'>arg</span>(<span class='number'>43i</span>).<span class='ident'>ignore</span>()
    .<span class='ident'>cmd</span>(<span class='string'>&quot;GET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_1&quot;</span>)
    .<span class='ident'>cmd</span>(<span class='string'>&quot;GET&quot;</span>).<span class='ident'>arg</span>(<span class='string'>&quot;key_2&quot;</span>).<span class='ident'>query</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>
</div><h4 id='method.execute' class='method'><a class='stability Experimental' title='Experimental'></a><code>fn <a href='#method.execute' class='fnname'>execute</a>(&amp;self, con: &amp;<a class='struct' href='../redis/struct.Connection.html' title='redis::Connection'>Connection</a>)</code></h4>
<div class='docblock'><p>This is a shortcut to <code>query()</code> that does not return a value and
will fail the task if the query of the pipeline fails.</p>

<p>This is equivalent to a call of query like this:</p>
<pre class='rust '>
<span class='kw'>let</span> _ : () <span class='op'>=</span> <span class='ident'>redis</span>::<span class='ident'>pipe</span>().<span class='ident'>cmd</span>(<span class='string'>&quot;PING&quot;</span>).<span class='ident'>query</span>(<span class='kw-2'>&amp;</span><span class='ident'>con</span>).<span class='ident'>unwrap</span>();
</pre>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "redis";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>